apiVersion: v1
kind: Pod
spec:
  containers:
  - name: ccr-proxy
    image: $containerRegistryUrl/ccr-proxy@$digest
    command:
    - /bin/sh
    - bootstrap.sh
    env:
    - name: CCR_FQDN
      value: $ccrFqdn
    - name: TELEMETRY_MOUNT_PATH
      value: $telemetryMountPath
    - name: ALLOW_HTTP_INBOUND_ACCESS
      value: $allowHttpInboundAccess
    - name: ALLOW_HTTP_OUTBOUND_ACCESS
      value: $allowHttpOutboundAccess
    - name: ALLOW_TCP_OUTBOUND_ACCESS
      value: $allowTcpOutboundAccess
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
    volumeMounts:
    - name: telemetrymounts
      mountPath: $telemetryMountPath
      readOnly: false

